const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UpdateModal-C_sAlGVZ.js","assets/ui-vendor-CFaKPCyu.js","assets/react-vendor-CM6QddGd.js","assets/index-WylA89_W.js","assets/index-CRSlVfd3.css"])))=>i.map(i=>d[i]);
import{j as e,m as t,v as N,w as k,x as w,e as S,a as I,_}from"./ui-vendor-CFaKPCyu.js";import{r as s,N as C,O as E}from"./react-vendor-CM6QddGd.js";import{a as O,b as z,c as x,O as T,S as L,T as M,d as V,M as H,e as U,R,u as D,f as F}from"./index-WylA89_W.js";function K(){const{search:r,searchMovie:n}=O(),{searchHistory:o,removeSearchHistoryItem:h,clearSearchHistory:m}=z(),{search:p,theme:i,setThemeSettings:f}=x(),y=()=>{const a=["light","dark","system"],b=(a.indexOf(i.mode)+1)%a.length;f({mode:a[b]})},[v,c]=s.useState(!1),g=()=>{setTimeout(()=>c(!1),200)},[d,l]=s.useState(""),j=a=>{a.key==="Enter"&&n(d)};return s.useEffect(()=>{l(r)},[r]),e.jsx(t.div,{className:"sticky top-0 z-50 flex justify-center",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{type:"tween",duration:.5,ease:"easeOut"},children:e.jsxs(N,{classNames:{wrapper:"max-w-300 p-2"},children:[e.jsx(k,{className:"!flex-none",children:e.jsx(C,{to:"/",className:"flex items-center gap-2",children:e.jsxs(t.div,{layoutId:"app-logo",className:"flex items-end gap-2",children:[e.jsx(t.div,{layoutId:"logo-icon",children:e.jsx(T,{})}),e.jsx(t.p,{layoutId:"logo-text",className:"hidden text-lg font-bold text-inherit md:block",children:"OUONNKI TV"})]})})}),e.jsxs(w,{as:"div",className:"items-center",justify:"end",children:[e.jsxs(t.div,{layoutId:"search-container",className:"flex w-full justify-end",children:[e.jsx(S,{classNames:{base:"max-w-full sm:max-w-[15rem] h-10 hover:max-w-[24rem] transition-all duration-600",mainWrapper:"h-full",input:"text-small",inputWrapper:"h-full font-normal text-default-500 bg-default-400/20 dark:bg-default-500/20"},placeholder:"输入内容搜索...",size:"sm",variant:"flat",startContent:e.jsx(t.div,{layoutId:"search-icon",children:e.jsx(L,{size:18})}),type:"search",radius:"full",value:d,onValueChange:l,onKeyDown:j,onClear:()=>{l("")},onFocus:()=>c(!0),onBlur:g}),v&&p.isSearchHistoryVisible&&o.length>0&&e.jsx("div",{className:"absolute top-12 left-0 w-full px-2",children:e.jsxs(I,{className:"w-full bg-white/80 p-2 shadow-xl backdrop-blur-md dark:bg-black/80",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between px-2 text-xs text-gray-500",children:[e.jsx("span",{children:"搜索历史"}),e.jsx("span",{className:"cursor-pointer hover:text-red-500",onClick:m,children:"清空"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:o.map(a=>e.jsxs("div",{className:"flex cursor-pointer items-center justify-between rounded-lg p-2 hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>{l(a.content),n(a.content),c(!1)},children:[e.jsx("span",{className:"line-clamp-1 text-sm",children:a.content}),e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",onClick:u=>{u.stopPropagation(),h(a.id)},children:e.jsx(M,{size:12})})]},a.id))})]})})]}),e.jsx(t.div,{layoutId:"theme-icon",onClick:y,className:"flex items-center rounded-full p-2 transition-all duration-300 hover:cursor-pointer hover:bg-gradient-to-r hover:from-blue-500 hover:to-purple-500 active:bg-gradient-to-r active:from-blue-600 active:to-purple-600",children:i.mode==="light"?e.jsx(V,{size:22,className:"text-gray-700 dark:text-gray-200"}):i.mode==="dark"?e.jsx(H,{size:22,className:"text-gray-700 dark:text-gray-200"}):e.jsx(U,{size:22,className:"text-gray-700 dark:text-gray-200"})}),e.jsx(t.div,{layoutId:"history-icon",className:"flex items-center rounded-full p-2 transition-all duration-300 hover:cursor-pointer hover:bg-gradient-to-r hover:from-blue-500 hover:to-purple-500 active:bg-gradient-to-r active:from-blue-600 active:to-purple-600",children:e.jsx(R,{})})]})]})})}const P=s.lazy(()=>_(()=>import("./UpdateModal-C_sAlGVZ.js"),__vite__mapDeps([0,1,2,3,4])));function Q(){const{hasNewVersion:r,setShowUpdateModal:n}=D(),{system:o}=x();return s.useEffect(()=>{r()&&o.isUpdateLogEnabled&&n(!0)},[r,n,o.isUpdateLogEnabled]),e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[e.jsx(s.Suspense,{fallback:null,children:e.jsx(P,{})}),e.jsxs(F,{className:"h-dvh",children:[e.jsx(K,{}),e.jsx("div",{className:"mx-auto max-w-300",children:e.jsx(E,{})})]})]})}export{Q as default};
