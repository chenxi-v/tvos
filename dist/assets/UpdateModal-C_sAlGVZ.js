import{u as b,j as s,l as h,n as u,o as g,m as a,b as y,q as f,s as j,d as N}from"./ui-vendor-CFaKPCyu.js";import{r as v}from"./react-vendor-CM6QddGd.js";import{u as o}from"./index-WylA89_W.js";const w="/assets/%E6%9F%B4%E7%8A%AC-luDXNqhy.svg",k="/assets/%E5%93%88%E5%A3%AB%E5%A5%87-COnhJuBd.svg",E="/assets/%E7%94%B0%E5%9B%AD%E7%8A%AC-As2sB1Y0.svg";function C(){const{isOpen:m,onOpen:l,onClose:d}=b(),{getLatestUpdate:c,markVersionAsViewed:x,showUpdateModal:i,setShowUpdateModal:p}=o(),e=c()||o.getState().updateHistory[0];v.useEffect(()=>{i&&l()},[i,l]);const n=()=>{e&&x(e.version),p(!1),d()};return e?s.jsx(h,{isOpen:m,onClose:n,size:"2xl",backdrop:"blur",hideCloseButton:!0,isDismissable:!1,placement:"center",classNames:{backdrop:"bg-gradient-to-br from-gray-50/80 to-gray-100/80",wrapper:"flex items-center justify-center p-4",base:"bg-white/80 backdrop-blur-xl backdrop-saturate-200 border border-white/50 shadow-xl max-w-full",header:"px-4 sm:px-6",body:"bg-transparent px-4 sm:px-6",footer:"px-4 sm:px-6"},motionProps:{variants:{enter:{y:0,opacity:1,scale:1,transition:{duration:.4,ease:[.36,.66,.04,1]}},exit:{y:20,opacity:0,scale:.95,transition:{duration:.3,ease:[.36,.66,.04,1]}}}},children:s.jsx(u,{className:"mx-0 my-0 max-h-[90vh] w-full max-w-2xl",children:()=>s.jsxs(s.Fragment,{children:[s.jsxs(g,{className:"flex flex-col gap-2 pb-4 sm:pb-6",children:[s.jsxs(a.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"flex flex-col items-start gap-2 sm:flex-row sm:items-center sm:gap-3",children:[s.jsx("h3",{className:"bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-xl font-bold break-words text-transparent sm:text-2xl",children:e.title}),s.jsxs(y,{size:"sm",variant:"flat",classNames:{base:"bg-gradient-to-r from-gray-100 to-gray-200 border border-gray-300/50 flex-shrink-0",content:"text-gray-700 font-semibold text-xs"},children:["v",e.version]})]}),s.jsxs(a.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"text-xs font-medium text-gray-500 sm:text-sm",children:[e.date," 更新"]})]}),s.jsx(f,{children:s.jsxs(j,{className:"mt-[-3vh] max-h-[70vh] py-10",hideScrollBar:!0,children:[s.jsxs("div",{className:"space-y-3 pb-4 sm:space-y-4 sm:pb-6",children:[e.features&&e.features.length>0&&s.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"relative",children:[s.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-br from-emerald-400/20 to-teal-400/20 blur-xl sm:rounded-xl"}),s.jsxs("div",{className:"relative rounded-lg border border-emerald-200/30 bg-gradient-to-br from-emerald-50/90 to-teal-50/90 p-3 backdrop-blur-sm sm:rounded-xl sm:p-5",children:[s.jsxs("h4",{className:"mb-2 flex items-center gap-2 text-sm font-bold text-emerald-800 sm:mb-3 sm:text-base",children:[s.jsx("img",{src:w,alt:"新功能",className:"h-6 w-6 flex-shrink-0 sm:h-8 sm:w-8"}),s.jsx("span",{children:"新功能"})]}),s.jsx("ul",{className:"space-y-2 sm:space-y-2.5",children:e.features.map((r,t)=>s.jsxs(a.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.4+t*.1},className:"flex items-start gap-2 text-xs sm:gap-3 sm:text-sm",children:[s.jsx("span",{className:"mt-0.5 h-1 w-1 flex-shrink-0 rounded-full bg-emerald-500 sm:mt-1 sm:h-1.5 sm:w-1.5"}),s.jsx("span",{className:"leading-relaxed break-words text-gray-700",children:r})]},t))})]})]}),e.fixes&&e.fixes.length>0&&s.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"relative",children:[s.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-br from-amber-400/20 to-orange-400/20 blur-xl sm:rounded-xl"}),s.jsxs("div",{className:"relative rounded-lg border border-amber-200/30 bg-gradient-to-br from-amber-50/90 to-orange-50/90 p-3 backdrop-blur-sm sm:rounded-xl sm:p-5",children:[s.jsxs("h4",{className:"mb-2 flex items-center gap-2 text-sm font-bold text-amber-800 sm:mb-3 sm:text-base",children:[s.jsx("img",{src:k,alt:"问题修复",className:"h-6 w-6 flex-shrink-0 sm:h-8 sm:w-8"}),s.jsx("span",{children:"问题修复"})]}),s.jsx("ul",{className:"space-y-2 sm:space-y-2.5",children:e.fixes.map((r,t)=>s.jsxs(a.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.5+e.features.length*.1+t*.1},className:"flex items-start gap-2 text-xs sm:gap-3 sm:text-sm",children:[s.jsx("span",{className:"mt-0.5 h-1 w-1 flex-shrink-0 rounded-full bg-amber-500 sm:mt-1 sm:h-1.5 sm:w-1.5"}),s.jsx("span",{className:"leading-relaxed break-words text-gray-700",children:r})]},t))})]})]}),e.breaking&&e.breaking.length>0&&s.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"relative",children:[s.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-br from-rose-400/20 to-pink-400/20 blur-xl sm:rounded-xl"}),s.jsxs("div",{className:"relative rounded-lg border border-rose-200/30 bg-gradient-to-br from-rose-50/90 to-pink-50/90 p-3 backdrop-blur-sm sm:rounded-xl sm:p-5",children:[s.jsxs("h4",{className:"mb-2 flex items-center gap-2 text-sm font-bold text-rose-800 sm:mb-3 sm:text-base",children:[s.jsx("img",{src:E,alt:"重要变更",className:"h-6 w-6 flex-shrink-0 sm:h-8 sm:w-8"}),s.jsx("span",{children:"重要变更"})]}),s.jsx("ul",{className:"space-y-2 sm:space-y-2.5",children:e.breaking.map((r,t)=>s.jsxs(a.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.6+(e.features?.length||0)*.1+(e.fixes?.length||0)*.1+t*.1},className:"flex items-start gap-2 text-xs sm:gap-3 sm:text-sm",children:[s.jsx("span",{className:"mt-0.5 h-1 w-1 flex-shrink-0 rounded-full bg-rose-500 sm:mt-1 sm:h-1.5 sm:w-1.5"}),s.jsx("span",{className:"leading-relaxed break-words text-gray-700",children:r})]},t))})]})]})]}),s.jsx("div",{className:"flex justify-center py-4 sm:py-6",children:s.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},children:s.jsx(N,{size:"md",variant:"shadow",onPress:n,className:"bg-gradient-to-r from-gray-600 to-gray-700 px-8 py-2 text-sm font-semibold text-white shadow-lg transition-all duration-200 hover:scale-105 hover:shadow-xl sm:px-12 sm:py-3 sm:text-base",children:"已阅"})})})]})})]})})}):null}export{C as default};
